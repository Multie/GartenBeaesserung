var defaultBorderBottomColor="#DADADA",errorBorderBottomColor="red",warnBorderBottomColor="yellow";function getChildenWithDataType(parent,tag,name){for(var input=null,a=0;a<parent.children.length;a++)if(parent.children[a].tagName==tag.toUpperCase()&&parent.children[a].dataset.type==name){input=parent.children[a];break}return input}function sendTextClick(button){var input=getChildenWithDataType(button.parentElement,"input","text");input.alt&&input.value?sendValue(input.alt,input.value).then(newVal=>{input.value=newVal,input.style.borderBottomColor=defaultBorderBottomColor},err=>{input.style.borderBottomColor=warnBorderBottomColor}):input.style.borderBottomColor=errorBorderBottomColor}function checkInput(input){input.value=input.value.replace(/[^0-9]/g,"");var val=parseFloat(input.value),min=parseFloat(input.min),max=parseFloat(input.max);return val<min?(input.style.borderBottomColor=errorBorderBottomColor,input.value=min,!1):!(val>max)||(input.style.borderBottomColor=errorBorderBottomColor,input.value=max,!1)}function sliderChange(){var ranges;document.querySelectorAll("input[type=range]").forEach(range=>{var valueBox;document.getElementById(range.id+"value").innerText=range.value})}function sendNumberClick(button){var input=getChildenWithDataType(button.parentElement,"input","number");input.alt&&input.value&&input.min&&input.max?checkInput(input)&&sendValue(input.alt,input.value).then(newVal=>{input.value=newVal,input.style.borderBottomColor=defaultBorderBottomColor},err=>{input.style.borderBottomColor=warnBorderBottomColor}):input.style.borderBottomColor=errorBorderBottomColor}function sendCheckboxClick(button){var input=getChildenWithDataType(button.parentElement,"input","checkbox");input.alt&&input.checked?sendValue(input.alt,input.checked).then(newVal=>{input.value=newVal,input.style.borderBottomColor=defaultBorderBottomColor},err=>{input.style.borderBottomColor=warnBorderBottomColor}):input.style.borderBottomColor=errorBorderBottomColor}function sendDateClick(button){var inputHour=getChildenWithDataType(button.parentElement,"input","hour"),inputMin=getChildenWithDataType(button.parentElement,"input","min"),inputSec=getChildenWithDataType(button.parentElement,"input","sec"),inputDay=getChildenWithDataType(button.parentElement,"input","day"),inputMon=getChildenWithDataType(button.parentElement,"input","mon"),inputYear=getChildenWithDataType(button.parentElement,"input","year");if(checkInput(inputHour)&&checkInput(inputMin)&&checkInput(inputSec)&&checkInput(inputDay)&&checkInput(inputMon)&&checkInput(inputYear)){var date=`${pad(inputHour.value,2)}:${pad(inputMin.value,2)}:${pad(inputSec.value,2)} ${pad(inputDay.value,2)}.${pad(inputMon.value,2)}.${pad(inputYear.value,4)}`;sendValue(inputHour.alt,date).then(newVal=>{19==newVal.length&&(inputHour.value=newVal.substr(0,2),inputMin.value=newVal.substr(3,2),inputSec.value=newVal.substr(6,2),inputDay.value=newVal.substr(9,2),inputMon.value=newVal.substr(12,2),inputYear.value=newVal.substr(15,4),inputHour.style.borderBottomColor=defaultBorderBottomColor,inputMin.style.borderBottomColor=defaultBorderBottomColor,inputSec.style.borderBottomColor=defaultBorderBottomColor,inputDay.style.borderBottomColor=defaultBorderBottomColor,inputMon.style.borderBottomColor=defaultBorderBottomColor,inputYear.style.borderBottomColor=defaultBorderBottomColor)},err=>{nputHour.style.borderBottomColor=warnBorderBottomColor,inputMin.style.borderBottomColor=warnBorderBottomColor,inputSec.style.borderBottomColor=warnBorderBottomColor,inputDay.style.borderBottomColor=warnBorderBottomColor,inputMon.style.borderBottomColor=warnBorderBottomColor,inputYear.style.borderBottomColor=warnBorderBottomColor})}}function pad(num,size){num||(num="");var s="0000"+num;return s.substr(s.length-size)}function sendValue(name,value){return new Promise(resolve=>{var xhttp=new XMLHttpRequest;xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&resolve(xhttp.responseText)},xhttp.open("POST","rest/"+name,!0),xhttp.send(value)})}function getValue(name){return new Promise(resolve=>{var xhttp=new XMLHttpRequest;xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&resolve(xhttp.responseText)},xhttp.open("GET","rest/"+name,!0),xhttp.send()})}function reload(){var refreshs,toasts;document.querySelectorAll("[class=refresh]").forEach(refresh=>{getValue(refresh.alt).then(newVal=>{refresh.innerHTML=newVal})}),document.querySelectorAll("[class=toast]").forEach(toast=>{getValue(toast.alt).then(newVal=>{toast.value!=newVal&&""!=newVal&&showToast(newVal),toast.value=newVal})})}function showToast(content){var toast=document.createElement("DIV");toast.className="snackbar show",toast.innerHTML=content,document.body.appendChild(toast),setTimeout((function(){document.body.removeChild(toast)}),3e3)}function expandClick(button){var div=getChildenWithDataType(button.parentElement,"div","expand-content"),up=getChildenWithDataType(button,"div","show"),down=getChildenWithDataType(button,"div","hidden");div&&(div.className.includes("close")?(div.className=div.className.replace("close","open"),up.style.display="",down.style.display="none"):(div.className=div.className.replace("open","close"),up.style.display="none",down.style.display=""))}setInterval(()=>{reload()},1e3),reload();